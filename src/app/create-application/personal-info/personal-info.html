<!-- Personal Information Section -->
<h3>Personal Information</h3>
<div class="personal-info-form" [formGroup]="personalForm">
    <mat-card>
        <mat-card-header>
            <mat-card-title>Personal Information</mat-card-title>
        </mat-card-header>
        <mat-card-content>
            <div class="form-row">
                <mat-form-field appearance="fill" style="padding: 0 10px;">
                    <mat-label>Prefix</mat-label>
                    <input matInput formControlName="prefix" placeholder="Mr., Ms., etc.">
                </mat-form-field>
                <mat-form-field appearance="fill" style="padding: 0 10px;">
                    <mat-label>First Name</mat-label>
                    <input matInput formControlName="firstName" required placeholder="First Name">
                </mat-form-field>
                <mat-form-field appearance="fill" class="middle-initial" style="padding: 0 10px;">
                    <mat-label>MI</mat-label>
                    <input matInput formControlName="middleInitial" placeholder="Middle Initial">
                </mat-form-field>
                <mat-form-field appearance="fill" style="padding: 0 10px;">
                    <mat-label>Last Name</mat-label>
                    <input matInput formControlName="lastName" required placeholder="Last Name">
                </mat-form-field>
                <mat-form-field appearance="fill" style="padding: 0 10px;">
                    <mat-label>Suffix</mat-label>
                    <input matInput formControlName="suffix" placeholder="Jr., Sr., etc.">
                </mat-form-field>
            </div>
            <div class="form-row">
                <mat-form-field appearance="fill" style="padding: 0 10px;">
                    <mat-label>Date of Birth</mat-label>
                    <input matInput type="date" formControlName="dob" required [min]="minDate" [max]="maxDate"
                        placeholder="YYYY-MM-DD">
                </mat-form-field>
                <mat-form-field appearance="fill" style="padding: 0 10px;">
                    <mat-label>Gender</mat-label>
                    <mat-select formControlName="gender" required>
                        <mat-option value="Male">Male</mat-option>
                        <mat-option value="Female">Female</mat-option>
                        <mat-option value="Other">Other</mat-option>
                    </mat-select>
                </mat-form-field>
                <mat-form-field appearance="fill" style="padding: 0 10px;">
                    <mat-label>Email</mat-label>
                    <input matInput formControlName="email" required placeholder="example@example.com">
                </mat-form-field>
            </div>
        </mat-card-content>
    </mat-card>

    <!-- Contact Information -->
    <mat-card>
        <mat-card-header>
            <mat-card-title>Contact Information</mat-card-title>
        </mat-card-header>
        <mat-card-content formArrayName="phones">
            <div *ngFor="let phone of phones.controls; let i=index" [formGroupName]="i" class="phone-row">
                <mat-form-field appearance="fill" style="padding: 0 10px;">
                    <mat-label>Phone Number</mat-label>
                    <input matInput formControlName="number" required placeholder="(555) 555-5555">
                </mat-form-field>
                <mat-form-field appearance="fill" style="padding: 0 10px;">
                    <mat-label>Phone Type</mat-label>
                    <mat-select formControlName="type" required>
                        <mat-option value="Mobile">Mobile</mat-option>
                        <mat-option value="Home">Home</mat-option>
                        <mat-option value="Work">Work</mat-option>
                    </mat-select>
                </mat-form-field>
                <button mat-icon-button color="warn" (click)="removePhone(i)" *ngIf="phones.length > 1">
                    <mat-icon>remove_circle</mat-icon>
                </button>
            </div>
            <button mat-stroked-button color="primary" type="button" (click)="addPhone()">Add Phone</button>
        </mat-card-content>
    </mat-card>

    <!-- Mailing Address -->
    <mat-card formGroupName="mailingAddress">
        <mat-card-header>
            <mat-card-title>Mailing Address</mat-card-title>
        </mat-card-header>
        <mat-card-content>
            <mat-form-field appearance="fill" class="full-width" style="padding: 0 10px;">
                <mat-label>Address Line 1</mat-label>
                <input matInput formControlName="address1" required placeholder="123 Main St">
            </mat-form-field>
            <mat-form-field appearance="fill" class="full-width" style="padding: 0 10px;">
                <mat-label>Address Line 2</mat-label>
                <input matInput formControlName="address2" placeholder="Apt, Suite, etc.">
            </mat-form-field>
            <div class="form-row">
                <mat-form-field appearance="fill" style="padding: 0 10px;">
                    <mat-label>City</mat-label>
                    <input matInput formControlName="city" required placeholder="City">
                </mat-form-field>
                <mat-form-field appearance="fill" style="padding: 0 10px;">
                    <mat-label>State</mat-label>
                    <input matInput formControlName="state" required placeholder="State">
                </mat-form-field>
                <mat-form-field appearance="fill" style="padding: 0 10px;">
                    <mat-label>Zip Code</mat-label>
                    <input matInput formControlName="zip" required placeholder="Zip Code">
                </mat-form-field>
                <mat-form-field appearance="fill" style="padding: 0 10px;">
                    <mat-label>County</mat-label>
                    <input matInput formControlName="county" required placeholder="County">
                </mat-form-field>
            </div>
        </mat-card-content>
    </mat-card>

    <!-- Billing Address -->
    <mat-card>
        <mat-card-header>
            <mat-card-title>Billing Address</mat-card-title>
        </mat-card-header>
        <mat-card-content>
            <mat-checkbox formControlName="billingSame">Billing address is the same as mailing address</mat-checkbox>
            <div *ngIf="!personalForm.get('billingSame')?.value" formGroupName="billingAddress">
                <mat-form-field appearance="fill" class="full-width" style="padding: 0 10px;">
                    <mat-label>Address Line 1</mat-label>
                    <input matInput formControlName="address1" required placeholder="123 Main St">
                </mat-form-field>
                <mat-form-field appearance="fill" class="full-width" style="padding: 0 10px;">
                    <mat-label>Address Line 2</mat-label>
                    <input matInput formControlName="address2" placeholder="Apt, Suite, etc.">
                </mat-form-field>
                <div class="form-row">
                    <mat-form-field appearance="fill" style="padding: 0 10px;">
                        <mat-label>City</mat-label>
                        <input matInput formControlName="city" required placeholder="City">
                    </mat-form-field>
                    <mat-form-field appearance="fill" style="padding: 0 10px;">
                        <mat-label>State</mat-label>
                        <input matInput formControlName="state" required placeholder="State">
                    </mat-form-field>
                    <mat-form-field appearance="fill" style="padding: 0 10px;">
                        <mat-label>Zip Code</mat-label>
                        <input matInput formControlName="zip" required placeholder="Zip Code">
                    </mat-form-field>
                    <mat-form-field appearance="fill" style="padding: 0 10px;">
                        <mat-label>County</mat-label>
                        <input matInput formControlName="county" required placeholder="County">
                    </mat-form-field>
                </div>
            </div>
        </mat-card-content>
    </mat-card>

    <div class="form-actions">
        <button mat-stroked-button (click)="onBack()">Back</button>
        <button mat-flat-button color="accent" (click)="onSaveAndContinue()" [disabled]="personalForm.invalid">Save and
            Continue</button>
    </div>
</div>